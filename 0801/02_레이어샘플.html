<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
<style>
    .wrapper {
        position: relative; /* static이 만들어진 뒤 이동 */
        width:220px;
        height:340px;
        left:100px;
        top:100px;
        border:1px solid red;
    }
    .panel {
        position:absolute; /* 부모(relative일때) 왼쪽 모서리 기준으로 움직임 */
        border:1px solid blue;
        /*
        left:100px;
        top:100px;
        */
    }
</style>
<script>
    var v_layers; // 아직 해당 태그가 안 만들어져서 선언만..
    var v_text;
    // var v_layers = document.querySelectorAll(".panel");
    // var v_text = document.querySelector("#id_text");
    //  v_text.value = 1 + "/" + v_layers.length;


    // window.onload 이벤트 자동 발생 시점은 html태그가 다 해석이 끝나고 페이지 내의 이미지 로딩까지 끝나면 발생. 아주 중요!!
    window.onload = function(){
        alert("로딩이 끝났어용. 이미지도용");
        v_layers = document.querySelectorAll(".panel");
        v_text = document.querySelector("#id_text");
        v_text.value = 1 + "/" + v_layers.length;
        setTimeout(f_next,2000);
    }
    
    var v_lIndex = 0; // 초기값
    function f_initZindex(p_layers){
        for(var i=0; i<p_layers.length; i++) {
            p_layers[i].style.zIndex = 1;
        }
    }

    function f_next(){
        //     var v_layers = document.querySelectorAll(".panel"); // 배열식
        //     var v_text = document.querySelector("#id_text");
        f_initZindex(v_layers);
        v_lIndex++;
        if(v_lIndex == v_layers.length) {
            v_lIndex = 0; // 처음으로 되돌리기
        }
        v_text.value = (v_lIndex+1) + "/" + v_layers.length;
        v_layers[v_lIndex].style.zIndex = 999; // 가장 앞으로 끌어내오기
       setTimeout(f_next,2000);
    }

    function f_prev(){
        f_initZindex(v_layers);
        v_lIndex--;
        if(v_lIndex == -1) { // 0보다 작아지면 ..
            v_lIndex = v_layers.length -1; // 끝으로 보내기
        }
        v_text.value = (v_lIndex+1) + "/" + v_layers.length;
        v_layers[v_lIndex].style.zIndex = 999;
        // 뜬금없는 질문. 마지막 index에서 처음 index로 가게 해 보삼
    }
</script>
</head>
<body>
    <input type="button" value="<" onclick="f_prev()">
    <input type="text" id="id_text" value="1/3" size="5">
    <input type="button" value=">" onclick="f_next()">
    <div class="wrapper">
        <div class="panel" style="z-index:999">
            <table border="1">
                <tr>
                    <td><a href="https://www.instagram.com/ldh_sky/"><img src="../images/dh2.jpg" width="100" height="100"></a></td>
                    <td><img src="../images/dh3.jpg" width="100" height="100"></td>
                </tr>
                <tr>
                    <td><img src="../images/dh.jpg" width="100" height="100"></td>
                    <td><img src="../images/dh4.jpg" width="100" height="100"></td>
                </tr>
                <tr>
                    <td><img src="../images/dh5.jpg" width="100" height="100"></td>
                    <td><img src="../images/dh6.jpg" width="100" height="100"></td>
                </tr>
            </table>
        </div>

        <div class="panel" style="z-index:888">
            <table border="1">
                <tr>
                    <td><img src="../images/c1.jpg" width="100" height="100"></td>
                    <td><img src="../images/c2.jpg" width="100" height="100"></td>
                </tr>
                <tr>
                    <td><img src="../images/c3.jpg" width="100" height="100"></td>
                    <td><img src="../images/c4.jpg" width="100" height="100"></td>
                </tr>
                <tr>
                    <td><img src="../images/c5.jpg" width="100" height="100"></td>
                    <td><img src="../images/c6.jpg" width="100" height="100"></td>
                </tr>
            </table>
        </div>

        <div class="panel" style="z-index:777">
            <table border="1">
                <tr>
                    <td><img src="../images/p1.jpg" width="100" height="100"></td>
                    <td><img src="../images/p2.jpg" width="100" height="100"></td>
                </tr>
                <tr>
                    <td><img src="../images/p3.jpg" width="100" height="100"></td>
                    <td><img src="../images/p4.jpg" width="100" height="100"></td>
                </tr>
                <tr>
                    <td><img src="../images/p5.jpg" width="100" height="100"></td>
                    <td><img src="../images/p7.jpg" width="100" height="100"></td>
                </tr>
            </table>
        </div>
    </div>
<script>
    /* 시퀀스(순서)상 
    var v_layers = document.querySelectorAll(".panel");
    var v_text = document.querySelector("#id_text");
    v_text.value = 1 + "/" + v_layers.length;
    */
</script>
</body>
</html>